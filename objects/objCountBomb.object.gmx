<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprCountBomb</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>5</depth>
  <persistent>0</persistent>
  <parentName>prtGimmick</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

image_speed = 0;
myblock = -1;

flash = 0;
actiontimer = 0;

weapondamage();

canHit = 1;
dead = 0;

time = 3;

shownumber = 1;
pressed = 0;

timerstart = noone;
alarm[0] = 1;

if sprite_index = sprCountBomb
{
    xx = 5; yy = 10;
    ex = 9; ey = 14;
    xs = 0; ys = 4;
}
if sprite_index = sprCountBombDown
{
    xx = 5; yy = 4;
    ex = 9; ey = 8;
    xs = 0; ys = -4;
}
if sprite_index = sprCountBombLeft
{
    xx = 11; yy = 4;
    ex = 14; ey = 8;
    xs = 4; ys = 0;
}
if sprite_index = sprCountBombRight
{
    xx = 5; yy = 4;
    ex = 10; ey = 8;
    xs = -4; ys = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if myblock != -1
{
    instance_activate_object(myblock);
    with myblock {instance_destroy();}
}
myblock = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>timerstart = time;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

if timerstart == noone { exit; }

if !dead
{
    if myblock = -1
    {
        myblock = instance_create(x,y,objSolidIndependent);
        myblock.sprite_index = sprite_index;
    }
}

if !global.frozen &amp;&amp; !dead &amp;&amp; !global.flashStopper 
{
    if instance_exists(target) &amp;&amp; image_index = 0
    {
        doit = 0;
        with objMegaman
        {
            with other
            {
                if (sprite_index = sprCountBomb &amp;&amp; global.GravityDir = 1)
                or (sprite_index = sprCountBombDown &amp;&amp; global.GravityDir = -1) 
                {
                    if place_meeting(x,y-1*global.GravityDir,other.id) &amp;&amp; other.ground
                    {doit = 1;}
                }
                if (sprite_index = sprCountBombDown &amp;&amp; global.GravityDir = 1)
                or (sprite_index = sprCountBomb &amp;&amp; global.GravityDir = -1)
                {
                    if place_meeting(x,y+2*global.GravityDir,other.id)// &amp;&amp; !other.target.ground
                    {doit = 1;}
                }
                if sprite_index = sprCountBombLeft
                {
                    if place_meeting(x-1,y,other.id) &amp;&amp; (other.xspeed &gt; 0 or other.isSlide or global.keyRight[other.player_id])
                    {doit = 1;}
                }
                if sprite_index = sprCountBombRight
                {
                    if place_meeting(x+1,y,other.id) &amp;&amp; (other.xspeed &lt; 0 or other.isSlide or global.keyLeft[other.player_id])
                    {doit = 1;}
                }
            }
        }
        if doit
        {
            image_index = 1;
            actiontimer = 8;
            pressed = 8;
        }
    }
    
    if actiontimer &amp;&amp; !pressed
    {
        actiontimer -= 1;
        if actiontimer = 0
        {
            if (time)
            {
                actiontimer = 18;
                time -= 1;
                shownumber = -3;
                playSFX(sfxCountBomb);
                exit;
            }
            if (time = 0)
            {
                actiontimer = 4;
                time -= 1;
                exit;
            }
            if flash &lt; 7
            {
                actiontimer = 4;
                if image_index = 1 {image_index = 2;}
                else {image_index = 1;}
                flash += 1;
                exit;
            }
            else 
            {
                instance_create(x+ex,y+ey,objHarmfulExplosion);
                playSFX(sfxMM3Explode);
                event_perform(ev_destroy,0);
                
                dead = 1;
                visible = 0;
                exit;
            }
        }
    }
}
else if dead
{
    image_index = 0;
    flash = 0;
    actiontimer = 0;
    shownumber = 1;
    pressed = 0;
    if timerstart != noone { time = timerstart; }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="prtPlayerProjectile">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with other
{
    event_perform(ev_collision,prtEnemy);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="21">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if other.penetrate &gt;= 2
{
    other.guardcancel = 2;
}
else
{
    other.guardcancel = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if timerstart == noone { exit; }

if pressed
{
    x += xs;
    y += ys;
}

drawSelf();

if time &gt; -1 &amp;&amp; shownumber
{
    draw_sprite(sprCountBombNumbers,time,x+xx,y+yy);
}
else if !shownumber
{
    shownumber += 1;
}

if pressed
{
    x -= xs;
    y -= ys;
    pressed -= 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
