<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprEnergyElement</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prtPickup</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

image_speed = 0;
xspeed = 0;
yspeed = 0;

respawnupondeath = 1;

primarycol = 0;
secondarycol = 0;

shine = 1;

alarm[2] = 2;

grabable = 0;
homing = false;
collected = false;

elementNumber = 1;

alreadyCollected = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with objMegaman
{
    i = instance_create(x,y,objMegamanExit);
    i.player_id = player_id;
    instance_destroy();
}

instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>primarycol = choose(global.primaryCol[0],global.secondaryCol[0],c_white,make_color_rgb(255,228,164));

secondarycol = primarycol;
while primarycol = secondarycol
{
    secondarycol = choose(global.primaryCol[0],global.secondaryCol[0],c_white,make_color_rgb(255,228,164));
}

if global.energyElement[elementNumber,global.currentLevel]
{
    shine = false;
    image_blend = c_gray;
    alreadyCollected = true;
    primarycol = global.nesPalette[0];
    secondarycol = global.nesPalette[13];
}

alarm[2] = 6;

if shine &amp;&amp; !collected
{
    i = instance_create(bbox_get_xcenter(),bbox_get_ycenter(),objSlideDust);
    i.sprite_index = sprShine;
    i.image_xscale = choose(1,-1);
    i.image_speed *= 1;
    with i {
        direction = irandom(360);
        rotation_movement(xstart,ystart,irandom_range(5,12),0);
    }
    
    shine = 0;
}
else
{
    shine = 1; exit;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

if !global.frozen
{
    inWater = false;
    var target = instance_nearest(x,y,objMegaman);
    if instance_exists(target)
    {
        if y &gt;= global.sectionBottom-8
        &amp;&amp; insideSection(x,y) &amp;&amp; insideView()
        {
            yspeed = -9;
            xspeed = arcCalcXspeed(yspeed, 0.25, x, y, target.x, target.y);
        }
        if collected {playerLockMovement();}
    }
    
    // move to player if inside solid object
    if place_meeting(x,y,objSolid) and room != lvlLaunchManAndShuttleMan_SpacemanStrife {
      if instance_exists(target) {
        var cy = y - target.y;
        var cx = x - target.x;
        if abs(cy) &gt; 4 {
          y -= sign(cy)
        } else if abs(cx) &gt; 4 {
          x -= sign(cx)
        }
      }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if collected {exit;}

playSFX(sfxElementGrab)
playMusic('Victory.ogg',0,1);

for (j=0; j&lt;global.playerCount; j+=1;) //Refill stuff
{
    global.playerHealth[j] = 28;
    for (i=0; i&lt;=global.totalWeapons; i+=1) 
    {
        global.ammo[j,i] = 28;
    }
}

with collectPlayer
{
    canMove = 0;
    canHit = 0;
    canPause = 0;
    shootStandstill = 0;
    xspeed = 0;
}

//Save data
if !global.energyElement[elementNumber,global.currentLevel]
{
    global.energyElement[elementNumber,global.currentLevel] = true;
    global.energyElements += 1;
}

saveorload('save',0);
if global.currentsavefile &gt; 0
{
    saveorload('save',global.currentsavefile);
}

visible = 0;
alarm[3] = 200;
alarm[2] = 0;
collected = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>drawSelf();
draw_sprite_ext(sprite_index,1,round(x),round(y),image_xscale,image_yscale,image_angle,primarycol,image_alpha);
draw_sprite_ext(sprite_index,2,round(x),round(y),image_xscale,image_yscale,image_angle,secondarycol,image_alpha);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
