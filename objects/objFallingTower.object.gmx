<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprDarkIcon</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>16</depth>
  <persistent>0</persistent>
  <parentName>prtAlwaysActive</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*
Height = ; (works by blocks)
MyTile = ; (tile layer to shift)
AdditionalTile = ; (+ how many tiles, usually for animated tiles)*/

towerBlock = noone;
fall = false;

Height = 1;
MyTile = 10;
AdditionalTile = 0;

delaySetup = 2;
    
image_yscale = Height;

Width = 0;
image_xscale = Width;

init = 1;
GetY = y;
XOffset = 0;
YOffset = 0;

myBlock = noone;

LockCamera = view_yview;
delay = 5;
timer = 0;
sectionTop = -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if delay &lt;= 0
if !global.frozen and insideSection(x+8,y)
    {
    view_yview[0] = y-LockCamera;
    if timer &gt; 0
    and timer &lt; 60
        {
        if timer = (floor(timer/4)*4)
            {
            for(i=MyTile;i&lt;=MyTile+AdditionalTile;i+=1;)
                tile_layer_shift(i,1,0);
            XOffset += 1;
            if instance_exists(objMegaman)
            and place_meeting(x,y-1,objMegaman)
                shiftObject(1,0,0,objMegaman,1);
            }
        if timer = (floor(timer/4)*4)+1
            {
            view_xview[0] = view_xview[0]+1;
            for(i=MyTile;i&lt;=MyTile+AdditionalTile;i+=1;)
                tile_layer_shift(i,1,0);
            XOffset += 1;
            if instance_exists(objMegaman)
            and place_meeting(x,y-1,objMegaman)
                shiftObject(1,0,0,objMegaman,1);
            }
        if timer = (floor(timer/4)*4)+2
            {
            for(i=MyTile;i&lt;=MyTile+AdditionalTile;i+=1;)
                tile_layer_shift(i,-1,0);
            XOffset -= 1;
            if instance_exists(objMegaman)
            and place_meeting(x,y-1,objMegaman)
                shiftObject(-1,0,0,objMegaman,1);
            }
        if timer = (floor(timer/4)*4)+3
            {
            view_xview[0] = view_xview[0]-1;
            for(i=MyTile;i&lt;=MyTile+AdditionalTile;i+=1;)
                tile_layer_shift(i,-1,0);
            if instance_exists(objMegaman)
            and place_meeting(x,y-1,objMegaman)
                shiftObject(-1,0,0,objMegaman,1);
            XOffset -= 1;
            }
        }
    else
    if XOffset != 0
        {
        for(i=MyTile;i&lt;=MyTile+AdditionalTile;i+=1;)
            tile_layer_shift(i,-XOffset,0);
            if instance_exists(objMegaman)
            and place_meeting(x,y-1,objMegaman)
                shiftObject(-XOffset,0,0,objMegaman,1);
        XOffset -= XOffset;
        }
    }
if instance_exists(myBlock)
    myBlock.visible = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>delaySetup -= 1;

if init
{
    init = 0;
    image_yscale = Height;
    
    while !place_meeting(x-16,y,objStopScrolling)
    and !place_meeting(x-16,y,objRightScrolling)
    and !place_meeting(x,y,objLeftScrolling)
    and !place_meeting(x-16,y,objFallingTowerStop)
    and x &gt; 0
    {
        x -= 16;
    }
    Width = 0;
    
    while (!place_meeting(x+Width*16,y,objStopScrolling) || Width == 0)
    and !place_meeting(x+Width*16,y,objRightScrolling)
    and (!place_meeting(x+Width*16,y,objLeftScrolling) || Width == 0)
    and !place_meeting(x+Width*16,y,objFallingTowerStop)
    and x+Width*16 &lt; room_width
    {
        Width += 1;
    }
    image_xscale = Width;
}


var do_exit = false;

with objMegaman {
    if showReady || teleporting
        do_exit = true;
}

if delaySetup &gt;= -10 || do_exit
    exit;

if delay &lt;= 0
{
    if instance_exists(objMegaman)
    if !global.frozen and insideSection(x+8,y) and objMegaman.teleporting == false
    {
        if sectionTop == -1
        {
            sectionTop = global.sectionTop
            global.sectionTop = y -LockCamera;
            global.sectionBottom = global.sectionTop+view_hview;    
        }
        
        if objMegaman.sectionTop &gt; sectionTop
            fall = true;
        else
            fall = false;
        for(i=0;i&lt;=image_xscale;i+=1)
            {
            towerBlock = collision_point(x+8+i*16,y-1,objDarkmanBlock,0,1);
            if towerBlock
                if towerBlock.visible
                    fall = false;
            }
        
        if fall
        {
            timer += 1;
            if timer &gt;= 60
            {
                    global.sectionTop = y -LockCamera;
                    global.sectionBottom = global.sectionTop+view_hview;  
                    
                if !place_meeting(x,y-1,objMegaman)
                    shiftObject(0,-8,0,objMegaman,1);
                if instance_exists(prtPlayerProjectile)
                    with prtPlayerProjectile
                        y -= 8;
                y -= 8;
                YOffset -= 8;
                for(i=MyTile;i&lt;=MyTile+AdditionalTile;i+=1;)
                    tile_layer_shift(i,0,-8);
            }
        }
        else {timer = 0;}
        
        instance_activate_region(view_xview,y-LockCamera,view_wview,view_hview,1);
    }
    else if !global.frozen or instance_exists(objSectionSwitcher)
    {
        LockCamera = y-view_yview;
    }
}
else
{
    LockCamera = y-view_yview;
    delay -= 1;
}

if delay &lt;= 0
if !global.frozen and insideSection(x+8,y)
{
    if !instance_exists(myBlock)
    {
        myBlock = instance_create(x,y,prtMovingPlatformSolid)
        myBlock.sprite_index = sprite_index;
        myBlock.image_xscale = image_xscale;
        myBlock.image_yscale = image_yscale;
    }
    else
    {
        myBlock.yspeed = y-myBlock.y;
        myBlock.xspeed = x-myBlock.x;
    }
}
else if instance_exists(myBlock)
{
    myBlock.yspeed = 0;
    myBlock.xspeed = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
